var debug = false;

function bindToggleOpen( element ) {
	element.addEventListener( 'click', toggleOpen );
}

function toggleOpen(){
	var openElement = document.querySelector( this.dataset.openselector );

	this.classList.toggle('open');
	openElement.classList.toggle('open');
	document.body.classList.toggle('noScroll');
}

function openGridView(){
	var projectContainer = document.querySelector( '.projects' );
			projectContainer.classList.toggle( 'grid-view' );
}

var plane = document.getElementById('plane'),
    _height = window.innerHeight,
    scrollOffset = 0,
    scale = 0;

function loop() {
    scrollOffset = window.pageYOffset || window.scrollTop,
    scale = scrollOffset / _height;
    plane.style.transform = 'translate(' + scrollOffset + 'px, -' + (scrollOffset / 20) +'px) scale(' + (1 - (scale / 2)) + ')';

    requestAnimationFrame(loop);
}

loop();

var slideDelay = 10000,
    stopSlide = false;

function initSlider(selector){
  setTimeout( nextSlide.bind ( null, selector ), slideDelay);
};

function nextSlide( selector ){
  if( stopSlide ) return;
  var container = document.querySelector( selector ),
      currentItem = container.querySelector( '.active' ),
      nextItem = currentItem.nextSibling;

  currentItem.classList.toggle( 'active' );
  ( nextItem || container.children[ 0 ] ).classList.toggle( 'active' );

  setTimeout( nextSlide.bind( null, selector ), slideDelay );
}
function initEventHandlers() {
	// var gridViewBtn = document.getElementById( 'girdbutton' );
	// 		gridViewBtn.addEventListener( 'click', openGridView );

	if(debug){
		console.log('initing event handlers');
	}
	/*
		Document query selector doesn't return an array. Use array.prototype method for each.
		Select every data-openselector and bind an evenlistener to it.
	*/
  	Array.prototype.forEach.call( document.querySelectorAll('[data-openselector]'), bindToggleOpen );
}

function init(){
	initEventHandlers();
}

document.addEventListener("DOMContentLoaded", init);
