
var debug = false;

function initEventHandlers() {
	if(debug){
		console.log('initing event handlers');
	}
	/* 
		Document query selector doesn't return an array. Use array.prototype method for each. 
		Select every data-openselector and bind an evenlistener to it.
	*/
  Array.prototype.forEach.call( document.querySelectorAll('[data-openselector]'), bindToggleOpen );
}

function bindToggleOpen( element ) {
	element.addEventListener( 'click', toggleOpen );
}

function toggleOpen(){
	var openElement = document.querySelector( this.dataset.openselector );
	
	this.classList.toggle('open');
	openElement.classList.toggle('open');
	document.body.classList.toggle('noScroll');
}

var plane = document.getElementById('plane'),
	_height = window.innerHeight;

function loop() {
  var scrollOffset = window.pageYOffset || window.scrollTop,
  		scale = scrollOffset / _height;
  		plane.style.transform = 'translate3d(' + scrollOffset + 'px, -' + (scrollOffset / 20) +'px, 0) scale(' + (1 - (scale / 2)) + ')';

  requestAnimationFrame(loop);
}

loop();
function init(){
	initEventHandlers();
}
document.addEventListener("DOMContentLoaded", init);